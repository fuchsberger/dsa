<div class="max-w-sm mx-auto my-3 space-y-3 text-center">

  <%= icon @conn, "eye-solid", "mx-auto h-12 w-auto" %>

  <h2 class="text-3xl font-extrabold"><%= dgettext("account", "Sign Up") %></h2>

  <%= if @changeset.action do %>
    <div class="inline-block alert error">
      <%= dgettext "account", "Oops, something went wrong! Please check the errors below." %>
    </div>
  <% end %>

  <div class="flex justify-between text-sm">
    <%= link dgettext("account", "Log In"),
      to: Routes.user_session_path(@conn, :new) %>
    <%= link dgettext("account", "Forgot your password?"),
      to: Routes.user_reset_password_path(@conn, :new) %>
  </div>

  <%= form_for @changeset, Routes.user_registration_path(@conn, :create),
    [data: [turbo: false]], fn f -> %>
    <div class="space-y-3">

      <div class='icon rounded-md'>
        <%= label f, :username, dgettext("account", "Username"), class: "sr-only" %>
        <%= icon @conn, "user" %>
        <%= text_input f, :username,
          autocomplete: "username",
          class: "input",
          placeholder: dgettext("account", "Username") %>
      </div>
      <%= error_tag f, :username %>

      <%= inputs_for f, :credential, fn fc -> %>

        <div class='icon rounded-md'>
          <%= label fc, :email, dgettext("account", "Email"), class: "sr-only" %>
          <%= icon @conn, "mail-solid" %>
          <%= email_input fc, :email,
            autocomplete: "email",
            class: "input",
            placeholder: dgettext("account", "Email") %>
        </div>
        <%= error_tag fc, :email %>

        <div class='icon rounded-md'>
          <%= label fc, :password, dgettext("account", "Password"), class: "sr-only" %>
          <%= icon @conn, "lock-closed-solid" %>
          <%= password_input fc, :password,
            autocomplete: "new-password",
            class: "input",
            placeholder: dgettext("account", "Password") %>
        </div>
        <%= error_tag fc, :password %>

        <div class='icon rounded-md'>
          <%= label fc, :password_confirmation, dgettext("account", "Confirm Password"),
            class: "sr-only" %>
          <%= icon @conn, "lock-closed-solid" %>
          <%= password_input fc, :password_confirmation,
            autocomplete: "new-password",
            class: "input",
            placeholder: dgettext("account", "Confirm Password") %>
        </div>
        <%= error_tag fc, :password_confirmation %>
      <% end %>

      <%= submit dgettext("account", "Register"), class: "primary" %>
    </div>
  <% end %>
</div>
